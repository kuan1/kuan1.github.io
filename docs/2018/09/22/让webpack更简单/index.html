<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>让webpack更简单 | 卢忠宽的个人博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="让webpack更简单 根据自己习惯将webpack封装成一个npm包，不再需要安装任何webpack相关包，甚至不需要任何配置。思路借鉴webpack-cli3和umi   发布npm包基础 点击进入  一、安装必需webpack依赖插件 基础webpack配置依赖有：：babel、css、less、postcss、file-loader、url-loader、html-webpack-plug">
<meta property="og:type" content="article">
<meta property="og:title" content="让webpack更简单">
<meta property="og:url" content="https://www.luzhongkuan.cn/2018/09/22/让webpack更简单/index.html">
<meta property="og:site_name" content="卢忠宽的个人博客">
<meta property="og:description" content="让webpack更简单 根据自己习惯将webpack封装成一个npm包，不再需要安装任何webpack相关包，甚至不需要任何配置。思路借鉴webpack-cli3和umi   发布npm包基础 点击进入  一、安装必需webpack依赖插件 基础webpack配置依赖有：：babel、css、less、postcss、file-loader、url-loader、html-webpack-plug">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-03-17T14:53:37.183Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="让webpack更简单">
<meta name="twitter:description" content="让webpack更简单 根据自己习惯将webpack封装成一个npm包，不再需要安装任何webpack相关包，甚至不需要任何配置。思路借鉴webpack-cli3和umi   发布npm包基础 点击进入  一、安装必需webpack依赖插件 基础webpack配置依赖有：：babel、css、less、postcss、file-loader、url-loader、html-webpack-plug">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">卢忠宽的个人博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">一个普通的前端开发者</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://www.luzhongkuan.cn"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-让webpack更简单" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/09/22/让webpack更简单/" class="article-date">
  <time datetime="2018-09-21T16:00:00.000Z" itemprop="datePublished">2018-09-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <header class="article-header">
      
  
    <h1 class="article-title" itemprop="name">
      让webpack更简单
    </h1>
  

    </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <h1 id="让webpack更简单"><a href="#让webpack更简单" class="headerlink" title="让webpack更简单"></a>让webpack更简单</h1><blockquote>
<p>根据自己习惯将webpack封装成一个npm包，不再需要安装任何webpack相关包，甚至不需要任何配置。思路借鉴<code>webpack-cli3</code>和<code>umi</code></p>
</blockquote>
<blockquote>
<p>发布npm包基础 <a href="https://www.luzhongkuan.cn/detail/149">点击进入</a></p>
</blockquote>
<h2 id="一、安装必需webpack依赖插件"><a href="#一、安装必需webpack依赖插件" class="headerlink" title="一、安装必需webpack依赖插件"></a>一、安装必需webpack依赖插件</h2><ul>
<li><p><strong>基础webpack配置依赖有：</strong>：<br><code>babel、css、less、postcss、file-loader、url-loader、html-webpack-plugin、copy-webpack-plugin</code>【<code>node-sass</code>安装比较慢，不翻墙经常安装失败，这里选择了less】</p>
</li>
<li><p><strong>开发模式依赖有：</strong>：<br><code>webpack-dev-server</code></p>
</li>
<li><p><strong>开发模式默认依赖有：</strong>：<br><code>clean-webpack-plugin、mini-css-extract-plugin、optimize-css-assets-webpack-plugin、uglifyjs-webpack-plugin</code></p>
</li>
</ul>
<p><strong>注意：</strong><br>需要<code>npm i 依赖包名 -S</code>安装依赖，这样其他项目引入只需要安装这一个包，就不需要再重新安装此包的依赖</p>
<h2 id="二、webpack-config加入默认配置"><a href="#二、webpack-config加入默认配置" class="headerlink" title="二、webpack.config加入默认配置"></a>二、webpack.config加入默认配置</h2><blockquote>
<p>具体配置就不展示了，详情请看demo</p>
</blockquote>
<p><strong>获取当前项目运行地址：</strong> 下边的resolve都是的这个方法<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 获取当前项目运行地址</span><br><span class="line">const resolve = (dir) =&gt; path.join(process.cwd(), dir)</span><br></pre></td></tr></table></figure></p>
<ul>
<li><strong>设置webpack默认配置：</strong></li>
</ul>
<ol>
<li>打包入口 </li>
<li>cdn地址</li>
<li>输出文件夹 </li>
<li>html模板</li>
<li>输出html地址和名字</li>
<li>proxy 代理地址</li>
</ol>
<ul>
<li><strong>用户自定义配置文件：</strong><blockquote>
<p>项目是为了零配置，但特殊情况下还是需要自定义配置。那么就规定一个默认配置文件</p>
</blockquote>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 获取用户webpack配置</span><br><span class="line">const userConfig = (() =&gt; &#123;</span><br><span class="line">  const configPath = resolve(&apos;kuan-pack.js&apos;) // 获取规定的配置文件地址</span><br><span class="line">  if (!fs.existsSync(configPath)) return &#123;&#125;</span><br><span class="line">  return require(configPath)</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
<h2 id="三、将配置npm包设置自定义指令"><a href="#三、将配置npm包设置自定义指令" class="headerlink" title="三、将配置npm包设置自定义指令"></a>三、将配置npm包设置自定义指令</h2><p>在<code>package.json</code>下的<code>bin</code>中定义指向脚本的文件地址，根据特定参数触发webpack的开发和编译</p>
<p>注意：脚本文件最上方加入<code>#!/usr/bin/env node</code>，说明使用node来运行文件，否则脚本不能运行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">switch (process.argv[2]) &#123;</span><br><span class="line">  case &apos;dev&apos;:</span><br><span class="line">    // 本地开发</span><br><span class="line">    process.env.NODE_ENV = &apos;development&apos;</span><br><span class="line">    const serve = require(&apos;../src/dev&apos;)</span><br><span class="line">    serve()</span><br><span class="line">    break</span><br><span class="line">  case &apos;build&apos;:</span><br><span class="line">    process.env.NODE_ENV = &apos;production&apos;</span><br><span class="line">    const build = require(&apos;../src/build&apos;)</span><br><span class="line">    build()</span><br><span class="line">    break</span><br><span class="line">  default:</span><br><span class="line">    console.error(`Unknown command $&#123;process.argv[2]&#125;`)</span><br><span class="line">    process.exit(1)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="四、kuan-pack"><a href="#四、kuan-pack" class="headerlink" title="四、kuan-pack"></a>四、kuan-pack</h2><p><a href="https://github.com/kuan1/kuan-pack/blob/master/README.md" target="_blank" rel="noopener">demo地址</a></p>
<p><strong>安装</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yarn add kuan-pack --dev</span><br><span class="line"># or</span><br><span class="line">npm run kuan-pack -D</span><br></pre></td></tr></table></figure></p>
<p><strong>开发</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kuan-pack dev</span><br></pre></td></tr></table></figure></p>
<p><strong>编译</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kuan-pack build</span><br></pre></td></tr></table></figure></p>
<p><strong>自定义webpack配置</strong></p>
<blockquote>
<p>项目根目录加入<code>kuan-pack.js</code></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">const path = require(&apos;path&apos;)</span><br><span class="line"></span><br><span class="line">module.exports = &#123;</span><br><span class="line">  entry: path.resolve(__dirname, &apos;test&apos;), // 打包入口 默认： src/index.js</span><br><span class="line">  publicPath: &apos;&apos;, // sdn路径 默认：空</span><br><span class="line">  distPath: path.resolve(__dirname, &apos;dist&apos;), // 输入地址 默认： dist</span><br><span class="line">  htmlTemplate: &apos;index.html&apos;, // 模板html 默认：根目录index.html &gt; 内部自定义模板</span><br><span class="line">  htmlName: &apos;index.html&apos;, // 输出html路径 默认：&apos;index.html&apos;</span><br><span class="line">  proxy: &#123; // 代理地址</span><br><span class="line">    &apos;/api&apos;: &#123;</span><br><span class="line">      target: &apos;https://luzhongkuan.cn/api&apos;,</span><br><span class="line">      changeOrigin: true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  config: &#123;</span><br><span class="line">    // 会合并到webpack.config</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="五、结语"><a href="#五、结语" class="headerlink" title="五、结语"></a>五、结语</h2><blockquote>
<p>因为个人描述和能力等问题，可能有些地方不正确或者不清楚, 有问题欢迎联系 QQ:869103451</p>
</blockquote>
<h2 id="后期修改"><a href="#后期修改" class="headerlink" title="后期修改"></a>后期修改</h2><blockquote>
<p>kuan-pack配置文件不能与包名一直，在mac运行没有问题，但是window10环境运行 kuan-pack 自动打开配置文件，而没有运行node_module 下的bin</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://www.luzhongkuan.cn/2018/09/22/让webpack更简单/" data-id="cjtd1jely002w8ycfsdyz0f29" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
  
<nav id="article-nav">
  
    <a href="/2018/09/22/前端-简化后台项目【增删该查禁用启用】/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          前端 简化后台项目【增删该查禁用启用】
        
      </div>
    </a>
  
  
    <a href="/2018/09/17/使用webpack发布npm包/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">使用webpack发布npm包</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/03/08/node使用wechaty制作微信机器人每天给老婆发送暖心/">node使用wechaty制作微信机器人每天给老婆发送暖心</a>
          </li>
        
          <li>
            <a href="/2019/03/06/使用nodeJS爬取一些测试图片/">使用nodeJS爬取一些测试图片</a>
          </li>
        
          <li>
            <a href="/2019/01/14/linux中nginx、mysql安装碰到的问题/">linux中nginx、mysql安装碰到的问题</a>
          </li>
        
          <li>
            <a href="/2018/12/27/spark-md5获取文件md5唯一标识/">spark-md5获取文件md5唯一标识</a>
          </li>
        
          <li>
            <a href="/2018/12/24/vue-cli-Invalid-Host-Origin-header/">vue-cli Invalid Host/Origin header</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 John Doe<br>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="https://cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>


  </div>
</body>
</html>